System.register(["./index-legacy-04b56afa.js","./index-legacy-386c46c8.js","./McPaySheet-legacy-e9e19c9d.js","./index-legacy-d6668c88.js","./index-legacy-8ea1b784.js","./index-legacy-6bad4039.js","./index-legacy-9d303c5d.js","./index-legacy-6d5c1992.js","./McNavBar-legacy-163ae2a7.js","./medicine-legacy-0d2f57e8.js","./request-legacy-49611e85.js","./index-legacy-7ed2e303.js","./index-legacy-1e717b33.js","./_plugin-vue_export-helper-legacy-762b7923.js","./McIcon-legacy-3fed9db7.js","./consult-legacy-47466b10.js","./index-legacy-784a89ae.js","./use-route-legacy-047c5dd8.js","./use-placeholder-legacy-3f8d867f.js","./interceptor-legacy-9047adcd.js"],(function(a,e){"use strict";var r,d,l,i,t,n,o,c,v,s,p,u,g,m,y,w,f,h,b,x,j,_,k,z,I,P,C,$,D,T,q,S,V=document.createElement("style");return V.textContent='.order-pay-page[data-v-8a225605]{padding:11.73333vw 0 17.33333vw}.order-pay-page[data-v-8a225605] .van-nav-bar{background-color:var(--mc-primary)}.order-pay-page[data-v-8a225605] .van-nav-bar .van-nav-bar__arrow,.order-pay-page[data-v-8a225605] .van-nav-bar .van-nav-bar__title{color:#fff}.order-pay-page[data-v-8a225605] .van-cell .van-cell__title,.order-pay-page[data-v-8a225605] .van-cell .van-cell__value{font-size:4.26667vw}.order-pay-page[data-v-8a225605] .van-cell.price .van-cell__value{font-size:4.8vw;color:var(--mc-price)}.order-pay-page[data-v-8a225605] .van-submit-bar{box-shadow:0 0 .53333vw rgba(0,0,0,.1)}.order-pay-page[data-v-8a225605] .van-submit-bar .van-button{width:53.33333vw}.order-pay-page .order-address[data-v-8a225605]{padding:4vw;padding-bottom:0;background-color:#fff;font-size:3.46667vw}.order-pay-page .order-address .area[data-v-8a225605]{color:var(--mc-tag);margin-bottom:1.33333vw}.order-pay-page .order-address .area .van-icon-location[data-v-8a225605]{font-size:3.73333vw;color:#ff7702}.order-pay-page .order-address .detail[data-v-8a225605]{font-size:4.53333vw;margin-bottom:1.33333vw}.order-pay-page .order-address[data-v-8a225605]:after{content:"";display:block;height:3.2vw;background-color:var(--mc-bg);margin:4vw -4vw 0}.order-pay-page .order-medicines[data-v-8a225605]{background-color:#fff;padding:0 4vw}.order-pay-page .order-medicines .head[data-v-8a225605]{display:flex;align-items:center;height:14.4vw}.order-pay-page .order-medicines .head>h3[data-v-8a225605]{font-size:4.26667vw;font-weight:400}.order-pay-page .order-medicines .head>small[data-v-8a225605]{font-size:3.46667vw;color:var(--mc-tag);margin-left:2.66667vw}.order-pay-page .order-medicines .medicine[data-v-8a225605]{display:flex;flex-wrap:wrap;padding:4vw 0}.order-pay-page .order-medicines .medicine .van-image[data-v-8a225605]{width:21.33333vw;height:18.66667vw;border-radius:.53333vw;overflow:hidden}.order-pay-page .order-medicines .medicine .info[data-v-8a225605]{padding-left:4vw;width:66.66667vw}.order-pay-page .order-medicines .medicine .info .name[data-v-8a225605]{display:flex;font-size:3.46667vw;margin-bottom:1.33333vw}.order-pay-page .order-medicines .medicine .info .name>span[data-v-8a225605]:first-child{width:53.33333vw}.order-pay-page .order-medicines .medicine .info .name>span[data-v-8a225605]:last-child{width:13.33333vw;text-align:right}.order-pay-page .order-medicines .medicine .info .size[data-v-8a225605]{margin-bottom:1.33333vw}.order-pay-page .order-medicines .medicine .info .size .van-tag[data-v-8a225605]{background-color:var(--mc-primary);vertical-align:middle}.order-pay-page .order-medicines .medicine .info .size span[data-v-8a225605]:not(.van-tag){margin-left:2.66667vw;color:var(--mc-tag);vertical-align:middle}.order-pay-page .order-medicines .medicine .info .price[data-v-8a225605]{font-size:4.26667vw;color:#eb5757}.order-pay-page .order-medicines .medicine .desc[data-v-8a225605]{width:100%;background-color:var(--mc-bg);border-radius:1.06667vw;margin-top:2.66667vw;padding:1.06667vw 2.66667vw;color:var(--mc-tip)}.order-pay-page .order-tip[data-v-8a225605]{display:flex;flex-wrap:wrap;justify-content:center;padding:0 4vw;margin-top:2.66667vw}.order-pay-page .order-tip .tip[data-v-8a225605]{font-size:3.2vw;color:var(--mc-tag);width:100%;margin-bottom:8vw}.order-pay-page .order-tip .tip[data-v-8a225605]:before{content:"*";color:var(--mc-price);font-size:3.73333vw}.order-pay-page .order-tip .van-checkbox a[data-v-8a225605]{color:var(--mc-primary)}\n',document.head.appendChild(V),{setters:[a=>{r=a.d,d=a.r,l=a.l,i=a.o,t=a.e,n=a.c,o=a.h,c=a.t,v=a.F,s=a.j,p=a.w,u=a.k,g=a.s,m=a.i,y=a.y,w=a.p,f=a.f},a=>{h=a.S},a=>{b=a._},a=>{x=a.S},a=>{j=a.C},a=>{_=a.C},a=>{k=a.C},a=>{z=a.T},a=>{I=a._},a=>{P=a.g,C=a.a,$=a.c},a=>{D=a.s},a=>{T=a.I},a=>{q=a.I},a=>{S=a._},null,null,null,null,null,null],execute:function(){const e=a=>(w("data-v-8a225605"),a=a(),f(),a),V={key:0,class:"order-pay-page"},F={class:"order-address"},M={class:"area"},U={class:"detail"},E={class:"order-medicines"},A=e((()=>o("div",{class:"head"},[o("h3",null,"优医药房"),o("small",null,"优医质保 假一赔十")],-1))),B={class:"info"},G={class:"name"},H={class:"size"},J={class:"price"},N={class:"desc"},O={class:"order-detail"},Q={class:"order-tip"},R=e((()=>o("p",{class:"tip"}," 由于药品的特殊性，如非错发、漏发药品的情况，药品一经发出 不得退换，请核对药品信息无误后下单。 ",-1))),W=e((()=>o("a",{href:"javascript:;"},"支付协议",-1))),K={key:1,class:"order-pay-page"};a("default",S(r({__name:"OrderPay",setup(a){const e=y(),r=d(),w=d();l((async()=>{const a=await P({prescriptionId:e.query.id}),d=await C();if(r.value=a,d.length){const a=d.find((a=>1===a.isDefault));w.value=a||d[0]}}));const f=d(!1),S=d(!1),L=d(!1),X=d(""),Y=async()=>{if(!f.value)return window.scrollTo(0,document.body.scrollHeight),D("请同意支付协议");if(!w.value?.id)return window.scrollTo(0,0),D("请选择收货地址");if(!r.value?.id)return D("未找到处方");if(X.value)L.value=!0;else{S.value=!0;try{const a=await $({id:r.value.id,addressId:w.value.id});X.value=a.id,L.value=!0}catch(a){console.log(a),D("生成订单失败")}finally{S.value=!1}}};return(a,e)=>{const d=I,l=T,y=q,P=z,C=k,$=_,D=j,Z=x,aa=b,ea=h;return r.value&&w.value?(i(),t("div",V,[n(d,{middleTitle:"药品支付"}),o("div",F,[o("p",M,[n(l,{name:"location"}),o("span",null,c(w.value.province+w.value.city+w.value.county),1)]),o("p",U,c(w.value.addressDetail),1),o("p",null,c(w.value.receiver)+" "+c(w.value.mobile.replace(/^(\d{3})(?:\d{4})(\d{4})$/,"$1****$2")),1)]),o("div",E,[A,(i(!0),t(v,null,s(r.value.medicines,(a=>(i(),t("div",{class:"medicine van-hairline-top",key:a.id},[n(y,{src:a.avatar,fit:"contain"},null,8,["src"]),o("div",B,[o("p",G,[o("span",null,c(a.name),1),o("span",null,"x"+c(a.quantity),1)]),o("p",H,[1===a.prescriptionFlag?(i(),u(P,{key:0},{default:p((()=>[m("处方药")])),_:1})):g("",!0),o("span",null,c(a.specs),1)]),o("p",J,"¥"+c(a.amount),1)]),o("div",N,c(a.usageDosag),1)])))),128))]),o("div",O,[n($,null,{default:p((()=>[n(C,{title:"药品金额",value:`¥${r.value.payment}`},null,8,["value"]),n(C,{title:"运费",value:`¥${r.value.expressFee}`},null,8,["value"]),r.value.couponDeduction?(i(),u(C,{key:0,title:"优惠券",value:`¥-${r.value.couponDeduction}`},null,8,["value"])):g("",!0),n(C,{title:"实付款",value:`￥${r.value.actualPayment}`,class:"price"},null,8,["value"])])),_:1})]),o("div",Q,[R,n(D,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a)},{default:p((()=>[m(" 我已同意"),W])),_:1},8,["modelValue"])]),n(Z,{onClick:Y,loading:S.value,price:100*r.value.actualPayment,"button-text":"立即支付","button-type":"primary","text-align":"left"},null,8,["loading","price"]),n(aa,{show:L.value,"onUpdate:show":e[1]||(e[1]=a=>L.value=a),orderId:X.value,actualPayment:r.value.actualPayment,payCallback:"http://localhost:5173/medicine/pay/result"},null,8,["show","orderId","actualPayment"])])):(i(),t("div",K,[n(d,{middleTitle:"药品支付"}),n(ea,{title:"",row:4,style:{"margin-top":"30px"}}),n(ea,{title:"",row:4,style:{"margin-top":"30px"}})]))}}}),[["__scopeId","data-v-8a225605"]]))}}}));
