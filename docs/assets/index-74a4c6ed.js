import{r as f,d as w,o as r,e as v,h as o,c as e,t as i,w as n,i as C,u as h,F as L,j as x,k as I,l as H,p as F,f as N,n as P,b as U}from"./index-065e17f8.js";import{L as V,T as q,a as A}from"./index-3a794f6a.js";import{C as E,R as j}from"./index-1ee9ebed.js";import{_ as G}from"./McIcon-6ebf4c62.js";import{S as T,a as R,C as J}from"./index-4198cc38.js";import{r as S}from"./request-7d32c2d7.js";import{I as K}from"./index-5bbaee52.js";import{B}from"./index-3a701df8.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{u as O}from"./index-af501665.js";import"./index-e7e15f08.js";import"./use-id-eeb4c899.js";import"./use-route-b6d29d8b.js";import"./use-refs-3dcc9ac1.js";import"./interceptor-832f03c0.js";const z="/medical_consult_h5/assets/ad-c4ee3bf4.png",Q=t=>S.get("/patient/home/knowledge",{params:t}),X=t=>S.get("/home/page/doc",{params:t}),Y=(t,l="doc")=>S.post("like",{id:t,type:l}),M=(t="doc")=>{const l=f(!1);return{isFollowLoading:l,follow:async p=>{l.value=!0;try{await Y(p.id,t),p.likeFlag=p.likeFlag===1?0:1}finally{l.value=!1}}}},Z={class:"knowledge-card van-hairline-bottom"},ee={class:"head"},te={class:"info"},oe={class:"name"},ne={class:"depart van-ellipsis"},se={class:"body"},ae={class:"title van-ellipsis"},le={class:"tag"},ce=["innerHTML"],de={class:"imgs"},ie={class:"logs"},_e=w({__name:"KnowledgeCard",props:{knowledge:null},setup(t){const{isFollowLoading:l,follow:_}=M("knowledge");return(p,c)=>{const a=K,d=B;return r(),v("div",Z,[o("div",ee,[e(a,{round:"",class:"avatar",src:t.knowledge.creatorAvatar},null,8,["src"]),o("div",te,[o("p",oe,i(t.knowledge.creatorName),1),o("p",ne,i(t.knowledge.creatorHospatalName)+" "+i(t.knowledge.creatorDep)+" "+i(t.knowledge.creatorTitles),1)]),e(d,{loading:h(l),onClick:c[0]||(c[0]=s=>h(_)(t.knowledge)),class:"btn",size:"small",round:""},{default:n(()=>[C(i(t.knowledge.likeFlag===1?"已关注":"+ 关注"),1)]),_:1},8,["loading"])]),o("div",se,[o("h3",ae,i(t.knowledge.title),1),o("p",le,[(r(!0),v(L,null,x(t.knowledge.topics,(s,m)=>(r(),v("span",{key:m},"# "+i(s),1))),128))]),o("p",{class:"intro van-multi-ellipsis--l2",innerHTML:t.knowledge.content},null,8,ce),o("div",de,[(r(!0),v(L,null,x(t.knowledge.coverUrl,(s,m)=>(r(),I(a,{key:m,src:s,fit:"cover"},null,8,["src"]))),128))]),o("p",ie,[o("span",null,i(t.knowledge.collectionNumber>0?`${t.knowledge.collectionNumber} 收藏`:""),1),o("span",null,i(t.knowledge.commentNumber>0?`${t.knowledge.commentNumber} 评论`:""),1)])])])}}});const re=k(_e,[["__scopeId","data-v-25ba6e55"]]),ue={class:"knowledge-list"},me=w({__name:"KnowledgeList",props:{type:null},setup(t){const l=t,_=f(!1),p=f(!1),c=f([]),a=f({type:l.type,current:1,pageSize:10}),d=async()=>{const s=await Q(a.value);c.value.push(...s.rows),a.value.current>=s.pageTotal?p.value=!0:a.value.current++,_.value=!1};return(s,m)=>{const y=V;return r(),v("div",ue,[e(y,{loading:_.value,"onUpdate:loading":m[0]||(m[0]=g=>_.value=g),finished:p.value,"finished-text":"没有更多了",onLoad:d},{default:n(()=>[(r(!0),v(L,null,x(c.value,g=>(r(),I(re,{key:g.id,knowledge:g},null,8,["knowledge"]))),128))]),_:1},8,["loading","finished"])])}}});const b=k(me,[["__scopeId","data-v-3c1625a0"]]),pe={class:"doctor-card"},ve={class:"name"},fe=w({__name:"DoctorCard",props:{doctor:null},setup(t){const{isFollowLoading:l,follow:_}=M("doc");return(p,c)=>{const a=K,d=B;return r(),v("div",pe,[e(a,{round:"",src:t.doctor.avatar},null,8,["src"]),o("p",ve,i(t.doctor.name),1),o("p",null,i(t.doctor.hospitalName)+" "+i(t.doctor.depName),1),o("p",null,i(t.doctor.positionalTitles),1),e(d,{loading:h(l),onClick:c[0]||(c[0]=s=>h(_)(t.doctor)),round:"",size:"small",type:"primary"},{default:n(()=>[C(i(t.doctor.likeFlag===1?"已关注":"+ 关注"),1)]),_:1},8,["loading"])])}}});const he=k(fe,[["__scopeId","data-v-77b6e7c0"]]),ge=t=>(F("data-v-38274be5"),t=t(),N(),t),we={class:"recommend-doctor"},ke=ge(()=>o("div",{class:"head"},[o("p",null,"推荐关注"),o("a",{href:"javascript:;"},[C("查看更多"),o("i",{class:"van-icon van-icon-arrow"})])],-1)),ye={class:"body"},$e=w({__name:"RecommendDoctor",setup(t){const{width:l}=O(),_=f([]),p=async()=>{const c=await X({current:1,pageSize:5});_.value=c.rows};return H(()=>{p()}),(c,a)=>{const d=R,s=T;return r(),v("div",we,[ke,o("div",ye,[e(s,{width:150/375*h(l),autoplay:3e3,loop:!1,"show-indicators":!1},{default:n(()=>[(r(!0),v(L,null,x(_.value,m=>(r(),I(d,{key:m.id},{default:n(()=>[e(he,{doctor:m},null,8,["doctor"])]),_:2},1024))),128))]),_:1},8,["width"])])])}}});const be=k($e,[["__scopeId","data-v-38274be5"]]),u=t=>(F("data-v-12b38767"),t=t(),N(),t),Le={class:"home-page"},xe={class:"home-header"},Ce={class:"wrap"},Ie=u(()=>o("h1",null,"医疗问诊",-1)),Se={class:"search"},De={class:"home-nav"},Fe=u(()=>o("p",{class:"title"},"问医生",-1)),Ne=u(()=>o("p",{class:"desc"},"按科室问医生",-1)),Te=u(()=>o("p",{class:"title"},"极速问诊",-1)),Re=u(()=>o("p",{class:"desc"},"20s医生极速回复",-1)),Ke=u(()=>o("p",{class:"title"},"开药问诊",-1)),Be=u(()=>o("p",{class:"desc"},"线上买药更方便",-1)),ze=u(()=>o("p",{class:"title"},"药品订单",-1)),Me=u(()=>o("p",{class:"title"},"健康档案",-1)),We=u(()=>o("p",{class:"title"},"我的处方",-1)),He=u(()=>o("p",{class:"title"},"疾病查询",-1)),Pe={class:"home-banner"},Ue=u(()=>o("img",{src:z,alt:"ad"},null,-1)),Ve=u(()=>o("img",{src:z,alt:"ad"},null,-1)),qe=w({__name:"index",setup(t){const l=f("recommend"),_=P();return(p,c)=>{const a=G,d=U("RouterLink"),s=E,m=j,y=R,g=T,$=q,W=A;return r(),v("div",Le,[o("div",xe,[o("div",Ce,[Ie,o("div",Se,[e(a,{name:"home-search"}),C(" 搜一搜：疾病/症状/医生/健康知识 ")])])]),o("div",De,[e(m,null,{default:n(()=>[e(s,{span:"8"},{default:n(()=>[e(d,{to:"/",class:"nav"},{default:n(()=>[e(a,{name:"home-doctor"}),Fe,Ne]),_:1})]),_:1}),e(s,{span:"8"},{default:n(()=>[e(d,{to:"/consult/fast",onClick:c[0]||(c[0]=D=>h(_).setConsultType(h(J).Fast)),class:"nav"},{default:n(()=>[e(a,{name:"home-graphic"}),Te,Re]),_:1})]),_:1}),e(s,{span:"8"},{default:n(()=>[e(d,{to:"/",class:"nav"},{default:n(()=>[e(a,{name:"home-prescribe"}),Ke,Be]),_:1})]),_:1})]),_:1}),e(m,null,{default:n(()=>[e(s,{span:"6"},{default:n(()=>[e(d,{to:"/",class:"nav min"},{default:n(()=>[e(a,{name:"home-order"}),ze]),_:1})]),_:1}),e(s,{span:"6"},{default:n(()=>[e(d,{to:"/",class:"nav min"},{default:n(()=>[e(a,{name:"home-docs"}),Me]),_:1})]),_:1}),e(s,{span:"6"},{default:n(()=>[e(d,{to:"/",class:"nav min"},{default:n(()=>[e(a,{name:"home-rp"}),We]),_:1})]),_:1}),e(s,{span:"6"},{default:n(()=>[e(d,{to:"/",class:"nav min"},{default:n(()=>[e(a,{name:"home-find"}),He]),_:1})]),_:1})]),_:1})]),o("div",Pe,[e(g,{"indicator-color":"#fff"},{default:n(()=>[e(y,null,{default:n(()=>[Ue]),_:1}),e(y,null,{default:n(()=>[Ve]),_:1})]),_:1})]),e(W,{shrink:"",sticky:"",active:l.value,"onUpdate:active":c[1]||(c[1]=D=>l.value=D)},{default:n(()=>[e($,{title:"关注",name:"like"},{default:n(()=>[e(be),e(b,{type:"like"})]),_:1}),e($,{title:"推荐",name:"recommend"},{default:n(()=>[e(b,{type:"recommend"})]),_:1}),e($,{title:"减脂",name:"fatReduction"},{default:n(()=>[e(b,{type:"fatReduction"})]),_:1}),e($,{title:"饮食",name:"food"},{default:n(()=>[e(b,{type:"food"})]),_:1})]),_:1},8,["active"])])}}});const at=k(qe,[["__scopeId","data-v-12b38767"]]);export{at as default};
