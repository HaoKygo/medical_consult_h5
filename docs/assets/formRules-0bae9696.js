import{c as E,u as $,n as y,t as h,F as A,p as R,w as q}from"./index-3ac92062.js";import{u as x}from"./request-64361350.js";import{d as I,c as N}from"./index-89f95841.js";const[T,M]=E("form"),_={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:y,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:h,showErrorMessage:h,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var z=I({name:T,props:_,emits:["submit","failed"],setup(r,{emit:i,slots:d}){const{children:o,linkChildren:v}=$(A),l=e=>e?o.filter(t=>e.includes(t.name)):o,b=e=>new Promise((t,s)=>{const n=[];l(e).reduce((P,V)=>P.then(()=>{if(!n.length)return V.validate().then(g=>{g&&n.push(g)})}),Promise.resolve()).then(()=>{n.length?s(n):t()})}),F=e=>new Promise((t,s)=>{const n=l(e);Promise.all(n.map(a=>a.validate())).then(a=>{a=a.filter(Boolean),a.length?s(a):t()})}),S=e=>{const t=o.find(s=>s.name===e);return t?new Promise((s,n)=>{t.validate().then(a=>{a?n(a):s()})}):Promise.reject()},u=e=>typeof e=="string"?S(e):r.validateFirst?b(e):F(e),w=e=>{typeof e=="string"&&(e=[e]),l(e).forEach(s=>{s.resetValidation()})},B=()=>o.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{o.some(s=>s.name===e?(s.$el.scrollIntoView(t),!0):!1)},m=()=>o.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),f=()=>{const e=m();u().then(()=>i("submit",e)).catch(t=>{i("failed",{values:e,errors:t}),r.scrollToError&&t[0].name&&c(t[0].name)})},C=e=>{R(e),f()};return v({props:r}),x({submit:f,validate:u,getValues:m,scrollToField:c,resetValidation:w,getValidationStatus:B}),()=>{var e;return N("form",{class:M(),onSubmit:C},[(e=d.default)==null?void 0:e.call(d)])}}});const j=q(z),k=r=>{const i=/(^\d{6})(\d{8})([Xx\d]{4}$)/;return r.replace(i,"$1******$3")},p=/^[1-9]\d{5}(19\d{2}|20([0-1]\d|2[0-2]))((0[1-9]|1[0-2])(0[1-9]|[1-2]\d|3[01])|(02)(0[1-9]|[1-2]\d))(?!000)\d{3}[0-9Xx]$/,G=r=>!!r.match(p),K=r=>{const i=r[r.length-2];return Number(i)%2===1?1:0},W=[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],Y=[{required:!0,message:"请输入密码"},{pattern:/^[a-zA-Z0-9]{8,24}$/,message:"密码需包含8-24个字符"}],Z=[{required:!0,message:"请输入正确的验证码"},{pattern:/^\d{6}$/,message:"6位数字验证码"}],H=[{required:!0,message:"请输入身份证号"},{pattern:p,message:"身份证号码格式不对"}];export{j as F,k as a,H as b,K as e,G as i,W as m,Y as p,Z as v};
