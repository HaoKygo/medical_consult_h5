System.register(["./request-legacy-49611e85.js","./index-legacy-7ed2e303.js","./index-legacy-38ccaefa.js","./index-legacy-1e717b33.js","./index-legacy-04b56afa.js","./interceptor-legacy-9047adcd.js"],(function(o,e){"use strict";var t,a,s,i,n,l,r,c,m,v,u,g,d,h,p,f,w,y,x,b,Z,P,C,I,X,S,Y,z,H,W,D,j,R,$,T,N,B,O,L;return{setters:[o=>{t=o.d,a=o.L,s=o.u,i=o.P,n=o.m,l=o.c},o=>{r=o.c,c=o.y,m=o.n,v=o.l,u=o.p,g=o.a0,d=o.a1,h=o.t,p=o.S,f=o.m,w=o.H,y=o.h,x=o.z,b=o.a2,Z=o.G,P=o.v,C=o.a3,I=o.I,X=o.f,S=o.e},o=>{Y=o.a,z=o.S},o=>{H=o.I},o=>{W=o.d,D=o.D,j=o.r,R=o.a,$=o.E,T=o.c,N=o.l,B=o.G,O=o.m},o=>{L=o.c}],execute:function(){const e=o=>Math.sqrt((o[0].clientX-o[1].clientX)**2+(o[0].clientY-o[1].clientY)**2),M=r("image-preview")[1];var q=W({props:{src:String,show:Boolean,active:Number,minZoom:c(m),maxZoom:c(m),rootWidth:c(Number),rootHeight:c(Number),disableZoom:Boolean},emits:["scale","close","longPress"],setup(o,{emit:s,slots:i}){const n=D({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),l=t(),r=j(),c=R((()=>{const{rootWidth:e,rootHeight:t}=o,a=t/e;return n.imageRatio>a})),m=R((()=>{const{scale:o,moveX:e,moveY:t,moving:a,zooming:s}=n,i={transitionDuration:s||a?"0s":".3s"};if(1!==o){const a=e/o,s=t/o;i.transform=`scale(${o}, ${o}) translate(${a}px, ${s}px)`}return i})),h=R((()=>{if(n.imageRatio){const{rootWidth:e,rootHeight:t}=o,a=c.value?t/n.imageRatio:e;return Math.max(0,(n.scale*a-e)/2)}return 0})),p=R((()=>{if(n.imageRatio){const{rootWidth:e,rootHeight:t}=o,a=c.value?t:e*n.imageRatio;return Math.max(0,(n.scale*a-t)/2)}return 0})),f=e=>{(e=g(e,+o.minZoom,+o.maxZoom+1))!==n.scale&&(n.scale=e,s("scale",{scale:e,index:o.active}))},w=()=>{f(1),n.moveX=0,n.moveY=0};let y,x,b,Z,P,C,I,X=!1;const S=t=>{const{touches:a}=t;if(y=a.length,2===y&&o.disableZoom)return;const{offsetX:s}=l;l.start(t),x=n.moveX,b=n.moveY,I=Date.now(),X=!1,n.moving=1===y&&1!==n.scale,n.zooming=2===y&&!s.value,n.zooming&&(Z=n.scale,P=e(t.touches))},z=()=>{if(y>1)return;const{offsetX:o,offsetY:e}=l,t=Date.now()-I;o.value<5&&e.value<5&&(t<250?C?(clearTimeout(C),C=null,(()=>{const o=n.scale>1?1:2;f(o),n.moveX=0,n.moveY=0})()):C=setTimeout((()=>{s("close"),C=null}),250):t>d&&s("longPress"))},W=e=>{let t=!1;if((n.moving||n.zooming)&&(t=!0,n.moving&&x===n.moveX&&b===n.moveY&&(t=!1),!e.touches.length)){n.zooming&&(n.moveX=g(n.moveX,-h.value,h.value),n.moveY=g(n.moveY,-p.value,p.value),n.zooming=!1),n.moving=!1,x=0,b=0,Z=1,n.scale<1&&w();const e=+o.maxZoom;n.scale>e&&(n.scale=e)}u(e,t),z(),l.reset()},N=o=>{const{naturalWidth:e,naturalHeight:t}=o.target;n.imageRatio=t/e};return $((()=>o.active),w),$((()=>o.show),(o=>{o||w()})),v("touchmove",(o=>{const{touches:t}=o;if(l.move(o),n.moving){const{deltaX:e,deltaY:t}=l,a=e.value+x,s=t.value+b;if((a>h.value||a<-h.value)&&!X&&l.isHorizontal())return void(n.moving=!1);X=!0,u(o,!0),n.moveX=g(a,-h.value,h.value),n.moveY=g(s,-p.value,p.value)}if(n.zooming&&(u(o,!0),2===t.length)){const o=e(t);f(Z*o/P)}}),{target:R((()=>{var o;return null==(o=r.value)?void 0:o.$el}))}),()=>{const e={loading:()=>T(a,{type:"spinner"},null)};return T(Y,{ref:r,class:M("swipe-item"),onTouchstartPassive:S,onTouchend:W,onTouchcancel:W},{default:()=>[i.image?T("div",{class:M("image-wrap")},[i.image({src:o.src})]):T(H,{src:o.src,fit:"contain",class:M("image",{vertical:c.value}),style:m.value,onLoad:N},e)]})}}});const[A,E]=r("image-preview"),G=["show","teleport","transition","overlayStyle","closeOnPopstate"],U={show:Boolean,loop:h,images:p(),minZoom:f(1/3),maxZoom:f(3),overlay:h,closeable:Boolean,showIndex:h,className:w,closeIcon:y("clear"),transition:String,beforeClose:Function,overlayClass:w,overlayStyle:Object,swipeDuration:f(300),startPosition:f(0),showIndicators:Boolean,closeOnPopstate:h,closeIconPosition:y("top-right"),teleport:[String,Object]};var k=W({name:A,props:U,emits:["scale","close","closed","change","longPress","update:show"],setup(o,{emit:e,slots:t}){const a=j(),n=D({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),l=()=>{if(a.value){const o=P(a.value.$el);n.rootWidth=o.width,n.rootHeight=o.height,a.value.resize()}},r=o=>e("scale",o),c=o=>e("update:show",o),m=()=>{L(o.beforeClose,{args:[n.active],done:()=>c(!1)})},v=o=>{o!==n.active&&(n.active=o,e("change",o))},u=()=>{if(o.showIndex)return T("div",{class:E("index")},[t.index?t.index({index:n.active}):`${n.active+1} / ${o.images.length}`])},g=()=>{if(t.cover)return T("div",{class:E("cover")},[t.cover()])},d=()=>{n.disableZoom=!0},h=()=>{n.disableZoom=!1},p=()=>{if(o.closeable)return T(I,{role:"button",name:o.closeIcon,class:[E("close-icon",o.closeIconPosition),C],onClick:m},null)},f=()=>e("closed"),w=(o,e)=>{var t;return null==(t=a.value)?void 0:t.swipeTo(o,e)};return s({swipeTo:w}),N(l),$([x,b],l),$((()=>o.startPosition),(o=>v(+o))),$((()=>o.show),(t=>{const{images:a,startPosition:s}=o;t?(v(+s),B((()=>{l(),w(+s,{immediate:!0})}))):e("close",{index:n.active,url:a[n.active]})})),()=>T(i,O({class:[E(),o.className],overlayClass:[E("overlay"),o.overlayClass],onClosed:f,"onUpdate:show":c},Z(o,G)),{default:()=>[p(),T(z,{ref:a,lazyRender:!0,loop:o.loop,class:E("swipe"),duration:o.swipeDuration,initialSwipe:o.startPosition,showIndicators:o.showIndicators,indicatorColor:"white",onChange:v,onDragEnd:h,onDragStart:d},{default:()=>[o.images.map(((a,s)=>T(q,{src:a,show:o.show,active:n.active,maxZoom:o.maxZoom,minZoom:o.minZoom,rootWidth:n.rootWidth,rootHeight:n.rootHeight,disableZoom:n.disableZoom,onScale:r,onClose:m,onLongPress:()=>e("longPress",{index:s})},{image:t.image})))]}),u(),g()]})}});let F;const J={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};o("s",((o,e=0)=>{if(X)return F||({instance:F}=n({setup(){const{state:o,toggle:e}=l(),t=()=>{o.images=[]};return()=>T(k,O(o,{onClosed:t,"onUpdate:show":e}),null)}})),o=Array.isArray(o)?{images:o,startPosition:e}:o,F.open(S({},J,o)),F}))}}}));
