System.register(["./index-legacy-7ed2e303.js","./index-legacy-04b56afa.js"],(function(o,e){"use strict";var r,l,a,n,i,t,s,c,u,d,v,g,f,h,m,y,p,w,b,x,S;return{setters:[o=>{r=o.c,l=o.C,a=o.x,n=o.f,i=o.n,t=o.t,s=o.h,c=o.I,u=o.w},o=>{d=o.d,v=o.r,g=o.g,f=o.a,h=o.E,m=o.C,y=o.l,p=o.G,w=o.c,b=o.K,x=o.V,S=o.m}],execute:function(){const[e,z]=r("image"),I={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:i,height:i,radius:i,lazyLoad:Boolean,iconSize:i,showError:t,errorIcon:s("photo-fail"),iconPrefix:String,showLoading:t,loadingIcon:s("photo")};var L=d({name:e,props:I,emits:["load","error"],setup(o,{emit:e,slots:r}){const i=v(!1),t=v(!0),s=v(),{$Lazyload:u}=g().proxy,d=f((()=>{const e={width:l(o.width),height:l(o.height)};return a(o.radius)&&(e.overflow="hidden",e.borderRadius=l(o.radius)),e}));h((()=>o.src),(()=>{i.value=!1,t.value=!0}));const I=o=>{t.value&&(t.value=!1,e("load",o))},L=()=>{const o=new Event("load");Object.defineProperty(o,"target",{value:s.value,enumerable:!0}),I(o)},j=o=>{i.value=!0,t.value=!1,e("error",o)},E=(e,r,l)=>l?l():w(c,{name:e,size:o.iconSize,class:r,classPrefix:o.iconPrefix},null),P=()=>{if(i.value||!o.src)return;const e={alt:o.alt,class:z("img"),style:{objectFit:o.fit,objectPosition:o.position}};return o.lazyLoad?b(w("img",S({ref:s},e),null),[[x("lazy"),o.src]]):w("img",S({ref:s,src:o.src,onLoad:I,onError:j},e),null)},$=({el:o})=>{const e=()=>{o===s.value&&t.value&&L()};s.value?e():p(e)},k=({el:o})=>{o!==s.value||i.value||j()};return u&&n&&(u.$on("loaded",$),u.$on("error",k),m((()=>{u.$off("loaded",$),u.$off("error",k)}))),y((()=>{p((()=>{var o;(null==(o=s.value)?void 0:o.complete)&&L()}))})),()=>{var e;return w("div",{class:z({round:o.round,block:o.block}),style:d.value},[P(),t.value&&o.showLoading?w("div",{class:z("loading")},[E(o.loadingIcon,z("loading-icon"),r.loading)]):i.value&&o.showError?w("div",{class:z("error")},[E(o.errorIcon,z("error-icon"),r.error)]):void 0,null==(e=r.default)?void 0:e.call(r)])}}});o("I",u(L))}}}));
