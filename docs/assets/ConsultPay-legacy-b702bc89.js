System.register(["./McPaySheet-legacy-e9e19c9d.js","./index-legacy-04b56afa.js","./index-legacy-d6668c88.js","./index-legacy-8ea1b784.js","./index-legacy-6bad4039.js","./index-legacy-9d303c5d.js","./McNavBar-legacy-163ae2a7.js","./avatar-doctor-legacy-b54bf544.js","./consult-legacy-47466b10.js","./user-legacy-6afce405.js","./function-call-legacy-8023bfe1.js","./request-legacy-49611e85.js","./_plugin-vue_export-helper-legacy-762b7923.js","./McIcon-legacy-3fed9db7.js","./index-legacy-7ed2e303.js","./index-legacy-784a89ae.js","./use-route-legacy-047c5dd8.js","./use-placeholder-legacy-3f8d867f.js","./index-legacy-1dd98c17.js","./interceptor-legacy-9047adcd.js"],(function(e,a){"use strict";var l,t,n,c,u,s,o,i,p,v,y,r,d,g,f,m,b,h,w,x,j,_,C,k,I,P,T,$,D,B,z,V,M=document.createElement("style");return M.textContent=".consult-pay-page[data-v-b05bfee2]{padding:11.73333vw 0 13.33333vw}.consult-pay-page .pay-info[data-v-b05bfee2]{display:flex;flex-wrap:wrap;align-items:center;padding:4vw}.consult-pay-page .pay-info .title[data-v-b05bfee2]{width:100%;font-size:4.26667vw;margin-bottom:2.66667vw}.consult-pay-page .pay-info img[data-v-b05bfee2]{margin-right:2.66667vw;width:10.13333vw;height:10.13333vw;border-radius:1.06667vw;overflow:hidden}.consult-pay-page .pay-info .desc[data-v-b05bfee2]{flex:1}.consult-pay-page .pay-info .desc>span[data-v-b05bfee2]{display:block;color:var(--mc-tag)}.consult-pay-page .pay-info .desc>span[data-v-b05bfee2]:first-child{font-size:4.26667vw;color:var(--mc-text2)}.consult-pay-page .pay-price[data-v-b05bfee2] .van-cell__title{font-size:4.26667vw}.consult-pay-page .pay-price[data-v-b05bfee2] .van-cell__value{font-size:4.26667vw;color:var(--mc-price)}.consult-pay-page .pay-space[data-v-b05bfee2]{height:3.2vw;background-color:var(--mc-bg)}.consult-pay-page .pay-schema[data-v-b05bfee2]{height:14.93333vw;display:flex;align-items:center;justify-content:center}.consult-pay-page .pay-schema .text[data-v-b05bfee2]{color:var(--mc-primary)}.consult-pay-page[data-v-b05bfee2] .van-submit-bar__button{font-weight:400;width:42.66667vw}\n",document.head.appendChild(M),{setters:[e=>{l=e._},e=>{t=e.d,n=e.n,c=e.r,u=e.l,s=e.N,o=e.o,i=e.e,p=e.c,v=e.h,y=e.t,r=e.s,d=e.w,g=e.k,f=e.u,m=e.i,b=e.v,h=e.p,w=e.f},e=>{x=e.S},e=>{j=e.C},e=>{_=e.C},e=>{C=e.C},e=>{k=e._},e=>{I=e._},e=>{P=e.b,T=e.c},e=>{$=e.f},e=>{D=e.a,B=e.s},e=>{z=e.s},e=>{V=e._},null,null,null,null,null,null,null],execute:function(){const a=e=>(h("data-v-b05bfee2"),e=e(),w(),e),M={key:0,class:"consult-pay-page"},S={class:"pay-info"},q={key:0,class:"title"},A=a((()=>v("img",{src:I,alt:"doctor avatar"},null,-1))),E=a((()=>v("p",{class:"desc"},[v("span",null,"极速问诊"),v("span",null,"自动分配医生")],-1))),N=a((()=>v("div",{class:"pay-space"},null,-1))),U={class:"pay-schema"},G=a((()=>v("span",{class:"text"},"支付协议",-1)));e("default",V(t({__name:"ConsultPay",setup(e){const a=n(),t=b(),h=c(),w=c();u((()=>{(async()=>{try{const e=await P({type:a.consult.type,illnessType:a.consult.illnessType});h.value=e,h.value.couponId&&a.setCoupon(h.value.couponId)}catch(e){D({title:"温馨提示",message:"问诊信息不完整请重新填写，如果未支付可以去记录继续支付"}),t.push("/home")}})(),(async()=>{if(!a.consult.patientId)return;const e=await $(a.consult.patientId);w.value=e})()}));const I=c(!1),V=c(!1),J=c(""),L=async()=>{if(!I.value)return z("请勾选我已同意支付协议");try{const e=await T(a.consult);J.value=e.id,a.clearConsult(),V.value=!0}catch(e){console.log(e)}};s((()=>{if(J.value)return!1}));const Q=async()=>B({title:"关闭支付",message:"取消支付将无法获得医生回复，医生接诊名额有限，是否确认关闭？",cancelButtonText:"仍要关闭",confirmButtonText:"继续支付",confirmButtonColor:"var(--mc-primary)"}).then((()=>!1)).catch((()=>(J.value="",t.push("/user/consult"),!0)));return(e,t)=>{const n=k,c=C,u=_,s=j,b=x,P=l;return h.value?(o(),i("div",M,[p(n,{middleTitle:"支付"}),v("div",S,[h.value.payment?(o(),i("p",q,y(`图文问诊 ${h.value.payment} 元`),1)):r("",!0),A,E]),p(u,null,{default:d((()=>[h.value.couponDeduction?(o(),g(c,{key:0,title:"优惠券",value:`-¥${h.value.couponDeduction}`},null,8,["value"])):r("",!0),h.value.pointDeduction?(o(),g(c,{key:1,title:"积分抵扣",value:`-¥${h.value.pointDeduction}`},null,8,["value"])):r("",!0),h.value.actualPayment?(o(),g(c,{key:2,title:"实付款",value:`¥${h.value.actualPayment}`,class:"pay-price"},null,8,["value"])):r("",!0)])),_:1}),N,p(u,null,{default:d((()=>[w.value?(o(),g(c,{key:0,title:"患者信息",value:`${w.value.name} | ${w.value.genderValue} | ${w.value.age}岁`},null,8,["value"])):r("",!0),p(c,{title:"病情描述",label:f(a).consult.illnessDesc},null,8,["label"])])),_:1}),v("div",U,[p(s,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=e=>I.value=e)},{default:d((()=>[m(" 我已同意 "),G])),_:1},8,["modelValue"])]),h.value.actualPayment?(o(),g(b,{key:0,onClick:L,price:100*h.value.actualPayment,textAlign:"left",buttonType:"primary",buttonText:"立刻支付"},null,8,["price"])):r("",!0),p(P,{show:V.value,"onUpdate:show":t[1]||(t[1]=e=>V.value=e),orderId:J.value,onClose:Q,"actual-payment":h.value.actualPayment},null,8,["show","orderId","actual-payment"])])):r("",!0)}}}),[["__scopeId","data-v-b05bfee2"]]))}}}));
