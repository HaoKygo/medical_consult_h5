import{d as T,v as F,r as b,a as W,o as a,e as i,h as l,t as g,A as M,u as e,c as s,w as o,i as r,s as O,k,p as U,f as j,F as D,j as A}from"./index-2c594688.js";import{L as E,T as R,a as q}from"./index-331a49f4.js";import{_ as G}from"./McNavBar-e9a11ba5.js";import{O as f,C as z}from"./index-5ddd6c15.js";import{g as H}from"./consult-81e986b5.js";import{u as J,a as K,P as Q}from"./useDeleteConsultOrder-451b12ff.js";import{_ as X}from"./avatar-doctor-b295eb9f.js";import"./request-4ce71363.js";import{u as Y}from"./useShowPrescription-89ecdc7e.js";import{B as Z}from"./index-b8156ae8.js";import{_ as S}from"./plugin-vueexport-helper-c27b6911.js";import"./index-0e510418.js";import"./use-id-02ab9fa4.js";import"./use-route-1b5f7a55.js";import"./use-refs-70bde5fc.js";import"./interceptor-063c6e58.js";import"./use-placeholder-9dd8531a.js";import"./function-call-724adbfa.js";import"./index-762ae6d7.js";const I=t=>(U("data-v-381098bb"),t=t(),j(),t),tt={class:"consult-item"},et={class:"head van-hairline--bottom"},st=I(()=>l("img",{class:"img",src:X,alt:"doctor avatar"},null,-1)),ot={class:"body-row"},nt=I(()=>l("div",{class:"body-label"},"病情描述",-1)),lt={class:"body-value"},at={class:"body-row"},rt=I(()=>l("div",{class:"body-label"},"价格",-1)),dt={class:"body-value"},it={class:"body-row"},ut=I(()=>l("div",{class:"body-label"},"创建时间",-1)),ct={class:"body-value tip"},mt={key:0,class:"foot"},pt={key:1,class:"foot"},_t={key:2,class:"foot"},vt={key:3,class:"foot"},yt={class:"more"},ft={key:4,class:"foot"},Ot=T({__name:"ConsultItem",props:{consultOrder:null},emits:["on-delete"],setup(t,{emit:$}){const u=t,_=F(),{cancelLoading:c,cancelConsultOrder:m}=J(),w=()=>{$("on-delete",u.consultOrder.id)},{deleteLoading:x,deleteConsultOrder:p}=K(w),{showPrescription:v}=Y(),h=b(!1),y=W(()=>[{text:"查看处方",disabled:!u.consultOrder.prescriptionId},{text:"删除订单"}]),P=(N,n)=>{n===0&&v(u.consultOrder.prescriptionId),n===1&&p(u.consultOrder)};return(N,n)=>{var B;const d=Z,V=Q;return a(),i("div",tt,[l("div",et,[st,l("p",null,g(((B=t.consultOrder.docInfo)==null?void 0:B.name)||"极速问诊（自动分配医生）"),1),l("span",{class:M({orange:t.consultOrder.status===e(f).ConsultPayWait,green:t.consultOrder.status===e(f).ConsultChat})},g(t.consultOrder.statusValue),3)]),l("div",{class:"body",onClick:n[0]||(n[0]=C=>e(_).push(`/user/consult/${t.consultOrder.id}`))},[l("div",ot,[nt,l("div",lt,g(t.consultOrder.illnessDesc),1)]),l("div",at,[rt,l("div",dt,"¥ "+g(t.consultOrder.payment.toFixed(2)),1)]),l("div",it,[ut,l("div",ct,g(t.consultOrder.createTime),1)])]),t.consultOrder.status===e(f).ConsultPayWait?(a(),i("div",mt,[s(d,{loading:e(c),onClick:n[1]||(n[1]=C=>e(m)(t.consultOrder)),class:"gray",plain:"",size:"small",round:""},{default:o(()=>[r(" 取消问诊 ")]),_:1},8,["loading"]),s(d,{to:`/user/consult/${t.consultOrder.id}`,type:"primary",plain:"",size:"small",round:""},{default:o(()=>[r(" 去支付 ")]),_:1},8,["to"])])):O("",!0),t.consultOrder.status===e(f).ConsultWait?(a(),i("div",pt,[s(d,{loading:e(c),onClick:n[2]||(n[2]=C=>e(m)(t.consultOrder)),class:"gray",plain:"",size:"small",round:""},{default:o(()=>[r(" 取消问诊 ")]),_:1},8,["loading"]),s(d,{to:`/room?orderId=${t.consultOrder.id}`,type:"primary",plain:"",size:"small",round:""},{default:o(()=>[r(" 继续沟通 ")]),_:1},8,["to"])])):O("",!0),t.consultOrder.status===e(f).ConsultChat?(a(),i("div",_t,[t.consultOrder.prescriptionId?(a(),k(d,{key:0,onClick:n[3]||(n[3]=C=>e(v)(t.consultOrder.prescriptionId)),class:"gray",plain:"",size:"small",round:""},{default:o(()=>[r(" 查看处方 ")]),_:1})):O("",!0),s(d,{to:`/room?orderId=${t.consultOrder.id}`,type:"primary",plain:"",size:"small",round:""},{default:o(()=>[r(" 继续沟通 ")]),_:1},8,["to"])])):O("",!0),t.consultOrder.status===e(f).ConsultComplete?(a(),i("div",vt,[l("div",yt,[s(V,{actions:e(y),onSelect:P,placement:"top-start",show:h.value,"onUpdate:show":n[4]||(n[4]=C=>h.value=C)},{reference:o(()=>[r("更多")]),_:1},8,["actions","show"])]),s(d,{to:`/room?orderId=${t.consultOrder.id}`,class:"gray",plain:"",size:"small",round:""},{default:o(()=>[r(" 问诊记录 ")]),_:1},8,["to"]),t.consultOrder.evaluateId?(a(),k(d,{key:1,to:`/room?orderId=${t.consultOrder.id}`,class:"gray",plain:"",size:"small",round:""},{default:o(()=>[r(" 查看评价 ")]),_:1},8,["to"])):(a(),k(d,{key:0,to:`/room?orderId=${t.consultOrder.id}`,type:"primary",plain:"",size:"small",round:""},{default:o(()=>[r(" 去评价 ")]),_:1},8,["to"]))])):O("",!0),t.consultOrder.status===e(f).ConsultCancel?(a(),i("div",ft,[s(d,{loading:e(x),onClick:n[5]||(n[5]=C=>e(p)(t.consultOrder)),class:"gray",plain:"",size:"small",round:""},{default:o(()=>[r(" 删除订单 ")]),_:1},8,["loading"]),s(d,{type:"primary",plain:"",size:"small",round:"",to:"/"},{default:o(()=>[r("咨询其他医生")]),_:1})])):O("",!0)])}}});const Ct=S(Ot,[["__scopeId","data-v-381098bb"]]),gt={class:"consult-list"},bt=T({__name:"ConsultList",props:{type:null},setup(t){const u=b({type:t.type,current:1,pageSize:5}),_=b(!1),c=b(!1),m=b([]),w=async()=>{const p=await H(u.value);m.value.push(...p.rows),u.value.current<p.pageTotal?u.value.current++:c.value=!0,_.value=!1},x=p=>{m.value=m.value.filter(v=>v.id!==p)};return(p,v)=>{const h=E;return a(),i("div",gt,[s(h,{loading:_.value,"onUpdate:loading":v[0]||(v[0]=y=>_.value=y),finished:c.value,finishedText:"没有更多了",onLoad:w},{default:o(()=>[(a(!0),i(D,null,A(m.value,y=>(a(),i(D,{key:y.id},[y?(a(),k(Ct,{key:0,consultOrder:y,onOnDelete:x},null,8,["consultOrder"])):O("",!0)],64))),128))]),_:1},8,["loading","finished"])])}}});const L=S(bt,[["__scopeId","data-v-b75f24a2"]]),ht={class:"consult-page"},kt=T({__name:"ConsultOrder",setup(t){return($,u)=>{const _=G,c=R,m=q;return a(),i("div",ht,[s(_,{middleTitle:"问诊记录"}),s(m,{sticky:""},{default:o(()=>[s(c,{title:"极速问诊"},{default:o(()=>[s(L,{type:e(z).Fast},null,8,["type"])]),_:1}),s(c,{title:"找医生"},{default:o(()=>[s(L,{type:e(z).Doctor},null,8,["type"])]),_:1}),s(c,{title:"开药问诊"},{default:o(()=>[s(L,{type:e(z).Medication},null,8,["type"])]),_:1})]),_:1})])}}});const Et=S(kt,[["__scopeId","data-v-93084bbd"]]);export{Et as default};
