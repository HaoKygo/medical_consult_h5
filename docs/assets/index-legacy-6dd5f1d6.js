System.register(["./index-legacy-04b56afa.js","./index-legacy-7ed2e303.js","./request-legacy-49611e85.js","./function-call-legacy-85d542e3.js","./index-legacy-1e717b33.js","./interceptor-legacy-9047adcd.js"],(function(e,a){"use strict";var o,n,l,r,i,t,d,s,v,p,u,c,m,g,f,w,b,h,x,y,z,_,k,S,j,C,F,L,R,A,U=document.createElement("style");return U.textContent=":root{--van-uploader-size: 21.33333vw;--van-uploader-icon-size: 6.4vw;--van-uploader-icon-color: var(--van-gray-4);--van-uploader-text-color: var(--van-text-color-2);--van-uploader-text-font-size: var(--van-font-size-sm);--van-uploader-upload-background: var(--van-gray-1);--van-uploader-upload-active-color: var(--van-active-color);--van-uploader-delete-color: var(--van-white);--van-uploader-delete-icon-size: 3.73333vw;--van-uploader-delete-background: rgba(0, 0, 0, .7);--van-uploader-file-background: var(--van-background);--van-uploader-file-icon-size: 5.33333vw;--van-uploader-file-icon-color: var(--van-gray-7);--van-uploader-file-name-padding: 0 var(--van-padding-base);--van-uploader-file-name-margin-top: var(--van-padding-xs);--van-uploader-file-name-font-size: var(--van-font-size-sm);--van-uploader-file-name-text-color: var(--van-gray-7);--van-uploader-mask-text-color: var(--van-white);--van-uploader-mask-background: rgba(50, 50, 51, .88);--van-uploader-mask-icon-size: 5.86667vw;--van-uploader-mask-message-font-size: var(--van-font-size-sm);--van-uploader-mask-message-line-height: var(--van-line-height-xs);--van-uploader-loading-icon-size: 5.86667vw;--van-uploader-loading-icon-color: var(--van-white);--van-uploader-disabled-opacity: var(--van-disabled-opacity)}.van-uploader{position:relative;display:inline-block}.van-uploader__wrapper{display:flex;flex-wrap:wrap}.van-uploader__wrapper--disabled{opacity:var(--van-uploader-disabled-opacity)}.van-uploader__input{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;cursor:pointer;opacity:0}.van-uploader__input-wrapper{position:relative}.van-uploader__input:disabled{cursor:not-allowed}.van-uploader__upload{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;width:var(--van-uploader-size);height:var(--van-uploader-size);margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;background:var(--van-uploader-upload-background)}.van-uploader__upload:active{background-color:var(--van-uploader-upload-active-color)}.van-uploader__upload--readonly:active{background-color:var(--van-uploader-upload-background)}.van-uploader__upload-icon{color:var(--van-uploader-icon-color);font-size:var(--van-uploader-icon-size)}.van-uploader__upload-text{margin-top:var(--van-padding-xs);color:var(--van-uploader-text-color);font-size:var(--van-uploader-text-font-size)}.van-uploader__preview{position:relative;margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;cursor:pointer}.van-uploader__preview-image{display:block;width:var(--van-uploader-size);height:var(--van-uploader-size);overflow:hidden}.van-uploader__preview-delete{position:absolute;top:0;right:0}.van-uploader__preview-delete--shadow{width:var(--van-uploader-delete-icon-size);height:var(--van-uploader-delete-icon-size);background:var(--van-uploader-delete-background);border-radius:0 0 0 3.2vw}.van-uploader__preview-delete-icon{position:absolute;top:0;right:0;color:var(--van-uploader-delete-color);font-size:var(--van-uploader-delete-icon-size);transform:scale(.7) translate(10%,-10%)}.van-uploader__preview-cover{position:absolute;top:0;right:0;bottom:0;left:0}.van-uploader__mask{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--van-uploader-mask-text-color);background:var(--van-uploader-mask-background)}.van-uploader__mask-icon{font-size:var(--van-uploader-mask-icon-size)}.van-uploader__mask-message{margin-top:1.6vw;padding:0 var(--van-padding-base);font-size:var(--van-uploader-mask-message-font-size);line-height:var(--van-uploader-mask-message-line-height)}.van-uploader__loading{width:var(--van-uploader-loading-icon-size);height:var(--van-uploader-loading-icon-size);color:var(--van-uploader-loading-icon-color)}.van-uploader__file{display:flex;flex-direction:column;align-items:center;justify-content:center;width:var(--van-uploader-size);height:var(--van-uploader-size);background:var(--van-uploader-file-background)}.van-uploader__file-icon{color:var(--van-uploader-file-icon-color);font-size:var(--van-uploader-file-icon-size)}.van-uploader__file-name{box-sizing:border-box;width:100%;margin-top:var(--van-uploader-file-name-margin-top);padding:var(--van-uploader-file-name-padding);color:var(--van-uploader-file-name-text-color);font-size:var(--van-uploader-file-name-font-size);text-align:center}\n",document.head.appendChild(U),{setters:[e=>{o=e.d,n=e.c,l=e.r,r=e.C,i=e.K,t=e.L,d=e.m,s=e.D},e=>{v=e.c,p=e.Q,u=e.L,c=e.n,m=e.y,g=e.I,f=e.R,w=e.x,b=e.e,h=e.m,x=e.h,y=e.t,z=e.S,_=e.P,k=e.T,S=e.G,j=e.w},e=>{C=e.L,F=e.u},e=>{L=e.s},e=>{R=e.I},e=>{A=e.c}],execute:function(){const[a,U,V]=v("uploader");function P(e,a){return new Promise((o=>{if("file"===a)return void o();const n=new FileReader;n.onload=e=>{o(e.target.result)},"dataUrl"===a?n.readAsDataURL(e):"text"===a&&n.readAsText(e)}))}function I(e,a){return p(e).some((e=>!!e.file&&(u(a)?a(e.file):e.file.size>+a)))}const O=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i;function B(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?(a=e.url,O.test(a)):"string"==typeof e.content&&0===e.content.indexOf("data:image"));var a}var D=o({props:{name:c,item:m(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview"],setup(e,{emit:a,slots:o}){const l=()=>{const{status:a,message:o}=e.item;if("uploading"===a||"failed"===a){const e="failed"===a?n(g,{name:"close",class:U("mask-icon")},null):n(C,{class:U("loading")},null),l=w(o)&&""!==o;return n("div",{class:U("mask")},[e,l&&n("div",{class:U("mask-message")},[o])])}},r=o=>{const{name:n,item:l,index:r,beforeDelete:i}=e;o.stopPropagation(),A(i,{args:[l,{name:n,index:r}],done:()=>a("delete")})},i=()=>a("preview"),t=()=>{if(e.deletable&&"uploading"!==e.item.status){const e=o["preview-delete"];return n("div",{role:"button",class:U("preview-delete",{shadow:!e}),tabindex:0,"aria-label":V("delete"),onClick:r},[e?e():n(g,{name:"cross",class:U("preview-delete-icon")},null)])}},d=()=>{if(o["preview-cover"]){const{index:a,item:l}=e;return n("div",{class:U("preview-cover")},[o["preview-cover"](b({index:a},l))])}},s=()=>{const{item:a,lazyLoad:o,imageFit:l,previewSize:r}=e;return B(a)?n(R,{fit:l,src:a.content||a.url,class:U("preview-image"),width:Array.isArray(r)?r[0]:r,height:Array.isArray(r)?r[1]:r,lazyLoad:o,onClick:i},{default:d}):n("div",{class:U("file"),style:f(e.previewSize)},[n(g,{class:U("file-icon"),name:"description"},null),n("div",{class:[U("file-name"),"van-ellipsis"]},[a.file?a.file.name:a.url]),d()])};return()=>n("div",{class:U("preview")},[s(),l(),t()])}});const T={name:h(""),accept:x("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:h(1/0),imageFit:x("cover"),resultType:x("dataUrl"),uploadIcon:x("photograph"),uploadText:String,deletable:y,afterRead:Function,showUpload:y,modelValue:z(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:y,previewOptions:Object,previewFullImage:y,maxSize:{type:[Number,String,Function],default:1/0}};var N=o({name:a,props:T,emits:["delete","oversize","clickUpload","closePreview","clickPreview","update:modelValue"],setup(e,{emit:a,slots:o}){const v=l(),u=[],c=(a=e.modelValue.length)=>({name:e.name,index:a}),m=()=>{v.value&&(v.value.value="")},w=o=>{if(m(),I(o,e.maxSize)){if(!Array.isArray(o))return void a("oversize",o,c());{const n=function(e,a){const o=[],n=[];return e.forEach((e=>{I(e,a)?n.push(e):o.push(e)})),{valid:o,invalid:n}}(o,e.maxSize);if(o=n.valid,a("oversize",n.invalid,c()),!o.length)return}}o=s(o),a("update:modelValue",[...e.modelValue,...p(o)]),e.afterRead&&e.afterRead(o,c())},h=a=>{const{maxCount:o,modelValue:n,resultType:l}=e;if(Array.isArray(a)){const e=+o-n.length;a.length>e&&(a=a.slice(0,e)),Promise.all(a.map((e=>P(e,l)))).then((e=>{const o=a.map(((a,o)=>{const n={file:a,status:"",message:""};return e[o]&&(n.content=e[o]),n}));w(o)}))}else P(a,l).then((e=>{const o={file:a,status:"",message:""};e&&(o.content=e),w(o)}))},x=a=>{const{files:o}=a.target;if(e.disabled||!o||!o.length)return;const n=1===o.length?o[0]:[].slice.call(o);if(e.beforeRead){const a=e.beforeRead(n,c());if(!a)return void m();if(k(a))return void a.then((e=>{h(e||n)})).catch(m)}h(n)};let y;const z=()=>a("closePreview"),j=(l,r)=>{const i=["imageFit","deletable","previewSize","beforeDelete"],t=b(S(e,i),S(l,i,!0));return n(D,d({item:l,index:r,onClick:()=>a("clickPreview",l,c(r)),onDelete:()=>((o,n)=>{const l=e.modelValue.slice(0);l.splice(n,1),a("update:modelValue",l),a("delete",o,c(n))})(l,r),onPreview:()=>(a=>{if(e.previewFullImage){const o=e.modelValue.filter(B),n=o.map((e=>(e.file&&!e.url&&"failed"!==e.status&&(e.url=URL.createObjectURL(e.file),u.push(e.url)),e.url))).filter(Boolean);y=L(b({images:n,startPosition:o.indexOf(a),onClose:z},e.previewOptions))}})(l)},S(e,["name","lazyLoad"]),t),S(o,["preview-cover","preview-delete"]))},C=()=>{if(e.previewImage)return e.modelValue.map(j)},R=e=>a("clickUpload",e),A=()=>{if(e.modelValue.length>=+e.maxCount)return;const a=e.readonly?null:n("input",{ref:v,type:"file",class:U("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:x},null);return o.default?n("div",{class:U("input-wrapper"),onClick:R},[o.default(),a]):i(n("div",{class:U("upload",{readonly:e.readonly}),style:f(e.previewSize),onClick:R},[n(g,{name:e.uploadIcon,class:U("upload-icon")},null),e.uploadText&&n("span",{class:U("upload-text")},[e.uploadText]),a]),[[t,e.showUpload]])};return r((()=>{u.forEach((e=>URL.revokeObjectURL(e)))})),F({chooseFile:()=>{v.value&&!e.disabled&&v.value.click()},closeImagePreview:()=>{y&&y.close()}}),_((()=>e.modelValue)),()=>n("div",{class:U()},[n("div",{class:U("wrapper",{disabled:e.disabled})},[C(),A()])])}});e("U",j(N))}}}));
